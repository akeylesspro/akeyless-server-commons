<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>src/managers/logger_manager.ts</title>
    <link rel="stylesheet" href="../styles.css" />
  </head>
  <body>
    <div class="content">
    <h1>src/managers/logger_manager.ts</h1>
    
    <h2>Purpose</h2>
    <p>Singleton logger manager providing timestamped logging with intelligent formatting, Axios-aware error handling, and table formatting for structured data. All logs include Israel timezone timestamps for consistent time tracking.</p>

    <h2>Dependencies</h2>
    <ul>
      <li><code>moment-timezone</code> - Timezone-aware date formatting</li>
      <li><code>axios</code> - For detecting Axios errors</li>
      <li><a href="../helpers/global_helpers.html"><code>parse_error</code></a> helper - Safe error serialization</li>
      <li><code>lodash.isObject</code> - Object type checking</li>
      <li><code>TObject</code> from <code>akeyless-types-commons</code></li>
    </ul>

    <h2>Exports and behavior</h2>
    
    <h3><code>LoggerManager</code> Class</h3>
    <ul>
      <li><code>getInstance(): LoggerManager</code> - Returns the singleton instance</li>
      <li><code>log(msg: string, data?: TObject&lt;any&gt; | any[]): void</code> - Logs informational message with optional data
        <ul>
          <li>Automatic table formatting for suitable arrays of objects (when not in Kubernetes)</li>
          <li>Standard JSON stringification for other data types</li>
          <li>Timestamp prefix in <code>Asia/Jerusalem</code> timezone</li>
        </ul>
      </li>
      <li><code>error(msg: string, data?: any): void</code> - Logs error message
        <ul>
          <li>Special handling for Axios errors (extracts response data)</li>
          <li>Uses <code>parse_error</code> for safe error serialization</li>
        </ul>
      </li>
      <li><code>warn(msg: string, data?: any): void</code> - Logs warning message with JSON stringification</li>
    </ul>

    <h3><code>logger: LoggerManager</code></h3>
    <p>Exported singleton instance for direct use.</p>

    <h2>Timestamp Format</h2>
    <p>All logs include timestamps in <code>Asia/Jerusalem</code> timezone:</p>
    <ul>
      <li>Format: <code>DD/MM/YYYY HH:mm:ss.SS</code></li>
      <li>Example: <code>27/01/2024 14:30:45.12</code></li>
      <li>Includes milliseconds for precise timing</li>
    </ul>

    <h2>Context</h2>
    <p>The logger provides consistent logging across the application:</p>
    <ul>
      <li><strong>Timestamped Logs</strong> - All logs include Israel timezone timestamps</li>
      <li><strong>Intelligent Formatting</strong> - Automatic table formatting for structured data</li>
      <li><strong>Error Handling</strong> - Special handling for Axios errors</li>
      <li><strong>Safe Serialization</strong> - Handles errors and objects safely</li>
      <li><strong>Singleton Pattern</strong> - Consistent behavior across application</li>
    </ul>
    </div>
  </body>
</html>
