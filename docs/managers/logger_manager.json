{
  "metadata": {
    "source_file": "src/managers/logger_manager.ts",
    "path": "docs/managers/logger_manager.md",
    "type": "module"
  },
  "purpose": "Singleton logger manager providing timestamped logging with intelligent formatting, Axios-aware error handling, and table formatting for structured data. All logs include Israel timezone timestamps for consistent time tracking.",
  "dependencies": [
    "moment-timezone - Timezone-aware date formatting",
    "axios - For detecting Axios errors",
    "parse_error helper - Safe error serialization",
    "lodash.isObject - Object type checking",
    "TObject from akeyless-types-commons - Generic object type"
  ],
  "architecture": {
    "pattern": "Singleton Pattern",
    "description": "The LoggerManager uses singleton pattern to ensure consistent logging behavior across the application. All logs share the same formatting and timestamp source.",
    "details": [
      "Timestamp Format: All logs include timestamps in Asia/Jerusalem timezone, Format: DD/MM/YYYY HH:mm:ss.SS, Example: 27/01/2024 14:30:45.12, Includes milliseconds for precise timing"
    ]
  },
  "sections": [
    {
      "title": "Exports and behavior",
      "exports": [
        {
          "name": "LoggerManager",
          "type": "class",
          "description": "Singleton class for logging operations.",
          "methods": [
            {
              "name": "getInstance",
              "signature": "getInstance(): LoggerManager",
              "type": "method",
              "description": "Returns the singleton instance.",
              "returns": "LoggerManager instance"
            },
            {
              "name": "log",
              "signature": "log(msg: string, data?: TObject<any> | any[]): void",
              "type": "method",
              "description": "Logs an informational message with optional data.",
              "parameters": [
                {
                  "name": "msg",
                  "type": "string",
                  "description": "Log message string"
                },
                {
                  "name": "data",
                  "type": "TObject<any> | any[]",
                  "optional": true,
                  "description": "Optional data to log (object, array, or primitive)"
                }
              ],
              "behavior": [
                "Table Formatting (Automatic): Detects if data is suitable for table display, Conditions for table format: Not running in Kubernetes (!process.env.KUBERNETES_SERVICE_HOST), Data is an array with more than 1 item, All items are objects (not arrays), All object values are primitives (string, number, boolean, or null), At least one object has more than 1 property, If conditions met → uses console.table() for formatted table, Otherwise → uses standard console.log() with JSON stringification",
                "Standard Formatting: Timestamp prefix: \"{timestamp} - {msg}\", Data suffix: \": {JSON.stringify(data)}\" or empty if no data, Objects and arrays are JSON stringified, Primitives are logged as-is"
              ],
              "examples": [
                {
                  "code": "logger.log('Server started');\n// Output: 27/01/2024 14:30:45.12 - Server started",
                  "language": "typescript"
                }
              ]
            },
            {
              "name": "error",
              "signature": "error(msg: string, data?: any): void",
              "type": "method",
              "description": "Logs an error message with special handling for Axios errors.",
              "parameters": [
                {
                  "name": "msg",
                  "type": "string",
                  "description": "Error message string"
                },
                {
                  "name": "data",
                  "type": "any",
                  "optional": true,
                  "description": "Optional error data (Error, AxiosError, or any)"
                }
              ],
              "behavior": [
                "Axios Error Detection: Checks if data is Axios error using axios.isAxiosError(), If Axios error: Checks if response data exists, Logs: \"{timestamp} - {msg}, axios error: {error.message}, data: {JSON.stringify(error)}\", Or: \"{timestamp} - {msg}, axios error: {error.message}\" (if no response data)",
                "Standard Error: Uses parse_error() to safely serialize error, Logs: \"{timestamp} - {msg} : {JSON.stringify(parsed_error)}\", Handles Error instances, strings, and other types"
              ],
              "examples": [
                {
                  "code": "logger.error('Operation failed', new Error('Something went wrong'));\n// Output: 27/01/2024 14:30:45.12 - Operation failed : {\"name\":\"Error\",\"message\":\"Something went wrong\"}",
                  "language": "typescript"
                }
              ]
            },
            {
              "name": "warn",
              "signature": "warn(msg: string, data?: any): void",
              "type": "method",
              "description": "Logs a warning message.",
              "parameters": [
                {
                  "name": "msg",
                  "type": "string",
                  "description": "Warning message string"
                },
                {
                  "name": "data",
                  "type": "any",
                  "optional": true,
                  "description": "Optional data to log"
                }
              ],
              "behavior": [
                "Uses console.warn() for output",
                "Timestamp prefix: \"{timestamp} - {msg}\"",
                "Data suffix: \": {JSON.stringify(data)}\" or empty if no data",
                "JSON stringifies objects/arrays"
              ],
              "examples": [
                {
                  "code": "logger.warn('Deprecated API used', { endpoint: '/old-api' });\n// Output: 27/01/2024 14:30:45.12 - Deprecated API used : {\"endpoint\":\"/old-api\"}",
                  "language": "typescript"
                }
              ]
            }
          ]
        },
        {
          "name": "logger",
          "type": "variable",
          "description": "Exported singleton instance for direct use."
        }
      ]
    }
  ],
  "context": [
    "The logger provides consistent logging across the application:",
    "Timestamped Logs - All logs include Israel timezone timestamps",
    "Intelligent Formatting - Automatic table formatting for structured data",
    "Error Handling - Special handling for Axios errors",
    "Safe Serialization - Handles errors and objects safely",
    "Singleton Pattern - Consistent behavior across application"
  ],
  "best_practices": [
    "Use descriptive messages",
    "Include relevant data for debugging",
    "Avoid logging sensitive information",
    "Use appropriate log level (log/error/warn)",
    "Avoid logging in tight loops"
  ]
}
