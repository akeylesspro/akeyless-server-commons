{
  "metadata": {
    "source_file": "akeyless-server-commons",
    "path": "docs/summary.md",
    "type": "summary"
  },
  "purpose": "Comprehensive project summary for akeyless-server-commons - a Node.js/TypeScript server utilities package that provides shared functionality for Akeyless microservices.",
  "sections": [
    {
      "title": "Overview",
      "description": "akeyless-server-commons is a comprehensive Node.js/TypeScript server utilities package that provides shared functionality for Akeyless microservices. It offers a standardized set of helpers, managers, middlewares, and types that ensure consistency across all server-side applications.",
      "points": [
        "Version: 1.0.168",
        "Repository: GitHub (https://github.com/akeylesspro/akeyless-server-commons)"
      ]
    },
    {
      "title": "What This Package Contains",
      "description": "The package exports four main modules:",
      "points": [
        "./helpers - Utility functions and service integrations",
        "./managers - Singleton managers for shared state",
        "./middlewares - Express middleware for common server needs",
        "./types - Shared TypeScript types, interfaces, and enums"
      ],
      "subsections": [
        {
          "title": "Helpers",
          "description": "Stateless utility functions organized by domain:",
          "categories": [
            {
              "name": "Infrastructure & Bootstrap",
              "modules": [
                {
                  "name": "global_helpers",
                  "description": "Environment validation, JSON responses, service URLs, geocoding, trimming utilities"
                },
                {
                  "name": "start",
                  "description": "Express server bootstrap with middleware setup, Redis initialization, snapshot loading"
                },
                {
                  "name": "firebase_helpers",
                  "description": "Firebase Admin SDK integration, Firestore CRUD operations, real-time snapshots, storage, audit logging"
                }
              ]
            },
            {
              "name": "Data & Communication",
              "modules": [
                {
                  "name": "email_helpers",
                  "description": "SendGrid email sending with attachment support"
                },
                {
                  "name": "notification_helpers",
                  "description": "SMS (Multisend/Twilio/Monogoto) and FCM push notifications"
                },
                {
                  "name": "phone_number_helpers",
                  "description": "Phone number normalization, validation, SIM provider detection"
                }
              ]
            },
            {
              "name": "Domain-Specific",
              "modules": [
                {
                  "name": "login_helpers",
                  "description": "User lookup by email/phone/UID"
                },
                {
                  "name": "time_helpers",
                  "description": "Timestamp conversion and formatting utilities"
                },
                {
                  "name": "location_helpers",
                  "description": "Geospatial distance calculations and Google Maps URLs"
                },
                {
                  "name": "tasks_helpers",
                  "description": "Task execution orchestration with caching and persistence"
                },
                {
                  "name": "boards_helpers",
                  "description": "Board provider resolution utilities"
                }
              ]
            },
            {
              "name": "Redis Integration",
              "modules": [
                {
                  "name": "redis/initialize",
                  "description": "Redis client setup (commander/listener pattern)"
                },
                {
                  "name": "redis/keys",
                  "description": "Key pattern utilities and SCAN operations"
                },
                {
                  "name": "redis/snapshot",
                  "description": "Redis-backed cache hydration with Firebase fallback"
                }
              ]
            }
          ]
        },
        {
          "title": "Managers",
          "description": "Singleton instances providing shared state:",
          "points": [
            "cache_manager - In-memory cache for arrays and objects (used across helpers)",
            "logger_manager - Timestamped logging with Axios-aware error handling, table formatting",
            "translation_manager - Translation cache and lookup for UI/SMS/email messages"
          ]
        },
        {
          "title": "Middlewares",
          "description": "Express middleware for request handling:",
          "points": [
            "global_mw - Request validation (mandatory, optional), request logging",
            "auth_mw - Authentication middleware (verify_user_auth, nx_user_login, client_login)",
            "error_handling - Async error wrapper and global error handler",
            "trim_mw - Request body string trimming middleware"
          ]
        },
        {
          "title": "Types",
          "description": "Shared TypeScript definitions:",
          "points": [
            "types/global - Core types (MW, Service, Route, JsonOK, JsonFailed, etc.)",
            "types/firebase_types - Firestore query and snapshot type definitions",
            "interfaces/global - Middleware and app option interfaces",
            "interfaces/email - Email data models (EmailData, EmailSettings, EmailAttachment)",
            "enums/global - Enums (SimProvider, NxServiceName, NxServiceNameMap)"
          ]
        }
      ]
    },
    {
      "title": "What This Package Does",
      "description": "Primary Functions:",
      "points": [
        "Server Bootstrap - Standardized Express server initialization with common middleware",
        "Firebase Integration - Complete Firestore/Storage/Auth/Messaging integration",
        "Caching System - In-memory cache with Redis and Firebase snapshot support",
        "Communication - Email (SendGrid) and SMS/Push notification services",
        "Request Handling - Validation, authentication, logging, error handling middleware",
        "Data Utilities - Phone normalization, time formatting, geocoding, task orchestration"
      ]
    },
    {
      "title": "Key Features",
      "points": [
        "Environment Validation - Validates required environment variables on startup",
        "Real-time Data Sync - Firebase snapshots and Redis Pub/Sub for live cache updates",
        "Multi-provider SMS - Automatic routing (Multisend/Twilio/Monogoto) based on phone number",
        "Audit Logging - Built-in audit trail for emails, SMS, and operations",
        "Translation Support - Multi-language support for notifications and UI",
        "Type Safety - Comprehensive TypeScript types for all APIs"
      ]
    },
    {
      "title": "Best Practices",
      "points": [
        "Always validate environment variables using init_env_variables() on startup",
        "Use cache_manager for frequently accessed data (populated by snapshots)",
        "Use logger for all logging (provides consistent timestamp formatting)",
        "Use json_ok/json_failed for consistent API responses",
        "Use middlewares for request validation and authentication",
        "Use types from the package for consistent API shapes"
      ]
    }
  ],
  "context": [
    "This package provides standardized functionality for Akeyless microservices:",
    "Consistency - Same patterns and utilities across all services",
    "Type Safety - Comprehensive TypeScript types",
    "Real-time Sync - Firebase and Redis snapshot support",
    "Communication - Email, SMS, and push notifications",
    "Request Handling - Validation, auth, logging, error handling"
  ]
}
